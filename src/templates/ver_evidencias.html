{% extends 'base.html' %}

{% block title %}Evidencias Registradas{% endblock %}

{% block CustomCSS %}
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
<link rel="stylesheet" href="{{ url_for('static', filename='css/ver_evidencias.css') }}">
{% endblock %}

{% block body %}

<!-- Logo -->
<div class="logo">
    <img src="{{ url_for('static', filename='img/logo_icon.png') }}" alt="Logo">
</div>

<!-- BotÃ³n volver -->
<div class="logout-btn">
    <a href="{{ url_for('home') }}">
        <button title="Volver al inicio">
            <i class="fa-solid fa-arrow-left"></i>
        </button>
    </a>
</div>

<div class="evidencias-container">

    <div class="header-evidencias">
        <i class="fas fa-images"></i>
        <h1>Registro de Evidencias</h1>
    </div>

    <!-- Buscador -->
    <div class="buscador-box">
        <i class="fa-solid fa-magnifying-glass"></i>
        <input type="text" id="buscador-siembra" placeholder="Buscar por usuario, actividad, fecha, insumos...">
    </div>

    <div id="no-result-evidencia" class="no-results">
        <i class="fa-solid fa-circle-exclamation"></i>
        No se encontraron coincidencias.
    </div>

    <div class="grid-evidencias">

        {% for e in evidencias %}
        <div class="evidencia-card">

            {% if e.ruta %}
            <img src="{{ e.ruta }}" class="evidencia-img">
            {% else %}
            <div class="no-image">
                <i class="fa-solid fa-image"></i>
                <p>Sin evidencia</p>
            </div>
            {% endif %}

            <div class="evidencia-body">
                <h3><i class="fa-solid fa-clipboard-list"></i> {{ e.actividad }}</h3>

                <p><i class="fa-solid fa-user"></i> <strong>{{ e.usuario }}</strong></p>

                <p><i class="fa-solid fa-calendar-day"></i> {{ e.fecha }}</p>

                <p>
                    <i class="fa-solid fa-boxes-packing"></i>
                    <strong>Insumos:</strong> {{ e.insumos }}
                </p>

                {% if e.observaciones %}
                <p class="obs">
                    <i class="fa-solid fa-comment"></i>
                    {{ e.observaciones }}
                </p>
                {% endif %}

                {% if e.comentario_admin %}
                <div class="comentario-admin">
                    <i class="fa-solid fa-user-shield"></i>
                    <strong>{{ e.admin_nombre }}:</strong>
                    <p>{{ e.comentario_admin }}</p>
                    <small>{{ e.fecha_comentario }}</small>
                </div>
                {% endif %}

            </div>
        </div>
        {% endfor %}

    </div>
</div>

<script src="{{ url_for('static', filename='js/ver_evidencias.js') }}"></script>

{% endblock %}
